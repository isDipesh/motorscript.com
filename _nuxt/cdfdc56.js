(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{170:function(e,t,n){"use strict";var r={props:["title","published","updated","archived"],head:function(){return{title:this.title}}},o=n(8),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"title",attrs:{itemprop:"name headline"}},[e._v(e._s(e.title))]),e._v(" "),n("div",{staticClass:"time"},[e._v("Published: "),n("time",{attrs:{itemprop:"datePublished"}},[e._v(e._s(e.published))])]),e._v(" "),e.updated?n("div",{staticClass:"time"},[e._v("Updated: "),n("time",{attrs:{itemprop:"dateModified"}},[e._v(e._s(e.updated))])]):e._e(),e._v(" "),e.archived?n("div",{staticClass:"block"},[e._v("Note: This is an archived post. Information may not be relevant now.")]):e._e()])}),[],!1,null,null,null);t.a=component.exports},220:function(e,t,n){"use strict";n.r(t);var r=n(170),o={mixins:[r.a],components:{BlogTitle:r.a}},c=n(8),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{attrs:{itemprop:"blogPost",itemscope:"",itemtype:"https://schema.org/BlogPosting"}},[n("BlogTitle",{attrs:{title:"Security: Hardening Ubuntu Server",published:"22 Mar 2020"}}),e._v(" "),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"content",attrs:{itemprop:"articleBody"}},[e._v("\n      A default installation of Ubuntu server is fairly secure. However, one can follow the following instructions to harden the security further.\n\n      "),n("h2",[e._v("Improve SSH Security")]),e._v("\n\n      Hardening SSH is vital in keeping your server secure.\n      "),n("nuxt-link",{attrs:{to:"/security-hardening-ssh-linux-server/"}},[e._v("Refer to this article for in-depth instructions for SSH\n        hardening.")]),e._v(" "),n("h2",[e._v("Secure Shared Memory")]),e._v("\n      Since multiple processes can use the same memory space, making shared memory read only prevents exploitation of vulnerabilities in services running in the server.\n      "),e._m(0),e._v(" "),e._m(1),e._v(" "),n("h2",[e._v("Secure the networking layer")]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),n("h2",[e._v("Use a Firewall")]),e._v("\n      Ubuntu comes with UFW, Uncomplicated Firewall. It is a simple alternative\n      to "),n("i",{staticClass:"hl"},[e._v("iptables")]),e._v(".\n\n      "),e._m(4),e._v("\n\n      UFW by default denies all incoming connection and allows all outgoing\n      connections.\n\n      "),e._v(" "),e._m(5),e._v("\n\n       Allow HTTP, HTTPS, and other popular services:\n      "),e._m(6),e._v("\n\n      View status and configuration:\n      "),e._m(7),e._v(" "),n("h2",[e._v("Keep your system up-to-date")]),e._v(" "),e._m(8),e._v("\nEnable automatic security updates (unattended-upgrades)\n\n      "),n("h2",[e._v("Remove unwanted user accounts")]),e._v("\n\n      If there are users not in use, remove them. Cloud providers create a\n      default user like "),n("i",{staticClass:"hl"},[e._v("ubuntu")]),e._v(" in fresh instances. You can\n      remove them if they aren't used.\n\n      "),e._m(9),e._v(" "),n("h2",[e._v("Cleanup unncessary packages and services")]),e._v("\n      List all running services and disable the services you are certain you\n      won't need.\n      "),e._m(10),e._v("\n      Also remove orphan packages.\n      "),e._m(11),e._v(" "),n("h2",[e._v("Other Security Measures")]),e._v(" "),e._m(12)],1)],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"$"}},[n("code",[e._v("sudo vi /etc/fstab")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-js code-content"},[n("code",[e._v("none /run/shm tmpfs defaults,ro 0 0")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"$"}},[n("code",[e._v("sudo vi /etc/sysctl.conf")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-ini code-content"},[n("code",[e._v("# Configuration from https://github.com/konstruktoid/hardening/blob/master/misc/sysctl.conf, with some added explainations\nfs.protected_hardlinks = 1\nfs.protected_symlinks = 1\nfs.suid_dumpable = 0\nkernel.core_uses_pid = 1\nkernel.dmesg_restrict = 1\nkernel.kptr_restrict = 2\nkernel.panic = 60\nkernel.panic_on_oops = 60\nkernel.perf_event_paranoid = 2\nkernel.randomize_va_space = 2\nkernel.sysrq = 0\nkernel.unprivileged_bpf_disabled = 1\nkernel.yama.ptrace_scope = 2\nnet.core.bpf_jit_harden = 2\nnet.ipv4.conf.all.accept_redirects = 0 # Discard ICMP redirects\nnet.ipv4.conf.all.accept_source_route = 0\nnet.ipv4.conf.all.log_martians = 1\nnet.ipv4.conf.all.rp_filter = 1 # Enable source validation by reverse path for IP Spoofing Protection\nnet.ipv4.conf.all.secure_redirects = 0\nnet.ipv4.conf.all.send_redirects = 0 # Disable send redirects\nnet.ipv4.conf.all.shared_media = 0\nnet.ipv4.conf.default.accept_redirects = 0\nnet.ipv4.conf.default.accept_source_route = 0\nnet.ipv4.conf.default.log_martians = 1\nnet.ipv4.conf.default.rp_filter= 1 # Enable source validation by reverse path for IP Spoofing Protection\nnet.ipv4.conf.default.secure_redirects = 0\nnet.ipv4.conf.default.send_redirects = 0 # Disable send redirects\nnet.ipv4.conf.default.shared_media = 0\nnet.ipv4.icmp_echo_ignore_broadcasts = 1\nnet.ipv4.icmp_ignore_bogus_error_responses = 1\nnet.ipv4.ip_forward = 0 # Disable packet forwarding for IPv4\nnet.ipv4.tcp_challenge_ack_limit = 1000000\nnet.ipv4.tcp_invalid_ratelimit = 500\nnet.ipv4.tcp_max_syn_backlog = 20480\nnet.ipv4.tcp_rfc1337 = 1\nnet.ipv4.tcp_syn_retries = 5\nnet.ipv4.tcp_synack_retries = 2\nnet.ipv4.tcp_syncookies = 1 # Enable TCP/IP SYN cookies: blocks SYN attacks\nnet.ipv4.tcp_timestamps = 0\nnet.ipv6.conf.all.accept_ra = 0\nnet.ipv6.conf.all.accept_redirects = 0\nnet.ipv6.conf.all.forwarding = 0\nnet.ipv6.conf.all.use_tempaddr = 2\nnet.ipv6.conf.default.accept_ra = 0\nnet.ipv6.conf.default.accept_ra_defrtr = 0\nnet.ipv6.conf.default.accept_ra_pinfo = 0\nnet.ipv6.conf.default.accept_redirects = 0\nnet.ipv6.conf.default.accept_source_route = 0\nnet.ipv6.conf.default.autoconf = 0\nnet.ipv6.conf.default.dad_transmits = 0\nnet.ipv6.conf.default.max_addresses = 1\nnet.ipv6.conf.default.router_solicitations = 0\nnet.ipv6.conf.default.use_tempaddr = 2\nnet.ipv6.conf.eth0.accept_ra_rtr_pref = 0\nnet.netfilter.nf_conntrack_max = 2000000\nnet.netfilter.nf_conntrack_tcp_loose = 0")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("Install and enable UFW:\n      "),n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"$"}},[n("code",[e._v("sudo apt install ufw\nsudo ufw enable")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n      Allow SSH:\n      "),n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"$"}},[n("code",[e._v("sudo ufw allow 22 # Or sudo ufw allow 23456 if SSH is listening on another port")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"$"}},[n("code",[e._v("sudo ufw allow http # OR sudo ufw allow 80\nsudo ufw allow https # OR sudo ufw allow 443\nsudo ufw allow 5432 # To allow postgres\nsudo ufw allow from 10.xxx.xx.xx to any port 6379 # Allow redis connections only from particular machine\n")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"$"}},[n("code",[e._v("sudo ufw status verbose")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"$"}},[n("code",[e._v("sudo apt update\nsudo apt upgrade")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"#"}},[n("code",[e._v("deluser --remove-home ubuntu")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"#"}},[n("code",[e._v("service --status-all")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"language-bash command-line",attrs:{"data-prompt":"#"}},[n("code",[e._v("apt autoremove --purge")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("Use fail2ban.")]),e._v(" "),n("li",[e._v("Try using single network service per VM instance.")]),e._v(" "),n("li",[e._v("Make use of security extensions like AppArmor and SELinux.")]),e._v(" "),n("li",[e._v("Implement service specific security measures like securing Nginx, Apache, PostgreSQL, MySQL.")]),e._v(" "),n("li",[e._v("Use firewall provided by your cloud service provider.")]),e._v(" "),n("li",[e._v("Access your system with security audit tools like Lynis.")]),e._v(" "),n("li",[e._v("Watch your logs. Use tools like LogWatch.")]),e._v(" "),n("li",[e._v("Try things you'd do if you lost access to your system but you need to get in. You may find some security holes. Fix them.")]),e._v(" "),n("li",[e._v("Get consultancy from a security expert.")])])}],!1,null,null,null);t.default=component.exports}}]);